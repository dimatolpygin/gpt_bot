# GPT Telegram Bot

Telegram-–±–æ—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å GPT. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∏–∞–ª–æ–≥–∞–º–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.

## –°—Ç–µ–∫

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –†–æ–ª—å |
|---|---|
| **Telegraf 4** | Telegram Bot Framework |
| **OpenAI gpt-4o** | AI, —Å—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤ |
| **Supabase** (PostgreSQL) | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –¥–∏–∞–ª–æ–≥–∏, –∏—Å—Ç–æ—Ä–∏—è |
| **Redis** | –ê–∫—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥, lock, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ |
| **Docker Compose** | –ó–∞–ø—É—Å–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ |

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. Supabase ‚Äî –≤—ã–ø–æ–ª–Ω–∏ SQL-–º–∏–≥—Ä–∞—Ü–∏—é

–í SQL Editor –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏ `src/db/migrations/init.sql`.

### 2. –ù–∞—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏ BOT_TOKEN, OPENAI_API_KEY, SUPABASE_URL, SUPABASE_KEY
```

### 3. –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
npm install
npm run dev
```

### 4. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
docker compose up -d
```

## –§—É–Ω–∫—Ü–∏–∏

- üë• **–ú—É–ª—å—Ç–∏–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** ‚Äî –∫–∞–∂–¥—ã–π –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∏–∞–ª–æ–≥–∏
- üìã **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** ‚Äî 5 –¥–∏–∞–ª–æ–≥–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, ‚àû —Å—Ç—Ä–∞–Ω–∏—Ü
- üîÑ **–°—Ç—Ä–∏–º–∏–Ω–≥** ‚Äî –æ—Ç–≤–µ—Ç GPT –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üè∑ **–ê–≤—Ç–æ-–Ω–∞–∑–≤–∞–Ω–∏–µ** ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–∏–∞–ª–æ–≥–∞ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- üîí **Whitelist** ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üõ° **Lock** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ Redis

## Git workflow

```
main   ‚Üê production (–¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions)
dev    ‚Üê —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç—ã
```

Merge dev ‚Üí main —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---|---|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –º–µ–Ω—é |
| `/menu` | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `/new` | –ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ |
| `/dialogs` | –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ |
